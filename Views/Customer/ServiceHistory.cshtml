@using Microsoft.AspNetCore.Http;
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor;
@model List<Helperland.Models.ViewModel.ServiceHistoryViewModel>
@{ int? userID = Context.Session.GetInt32("userID"); }
@{ int? Usertype = Context.Session.GetInt32("usertype");
}


@{
    Layout = null;
}

<!DOCTYPE html>
<html>

<head>
    <title>@ViewBag.Title | helperland</title>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="description">
    <meta content="" name="keywords">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
          rel="stylesheet">
    <!-- Vendor CSS Files -->
    <link href="~/lib/twitter-bootstrap/css/bootstrap.css" rel="stylesheet" />
    <link href="~/lib/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link rel="icon" href="~/Images/favicon_img.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel=stylesheet>
    <link href="~/css/site.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script src="~/jquery-validate/jquery.validate.js"></script>
    <script src="~/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.js"></script>
    <script src="~/js/main.js" asp-append-version="true"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- Main Js File-->
    <script src="~/js/main.js"></script>
    <!-- JS Bootstrap -->

    <script src="~/lib/twitter-bootstrap/js/bootstrap.min.js"></script>
    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/ae6d6e0254.js" crossorigin="anonymous"></script>
    <script src="https://lesscss.googlecode.com/files/less-1.0.30.min.js"></script>
    <link href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/css/star-rating.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.css" media="all" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
    @*<link rel="stylesheet/less" href="~/css/main.less" type="text/css" />*@

    <!--  Main CSS File -->
    <link href="~/css/servicehistory.css" rel="stylesheet" />

</head>

<body id="body">

    <div class="loader display-none text-center"></div>
    Navbar
    <nav class="navbar fixed-top navbar-expand-xl navbar-dark small-head">
        <div class="container-fluid">
            <a class="navbar-brand" asp-action="index" asp-controller="home">
                <img src="~/Images/white-logo-transparent-background.png" asp-append-version="true" alt="" id="brand-logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0" id="navLinks">

                    @if (userID == null)
                    {

                        <li class="nav-item hover-change ">
                            <a class="nav-link rounded-link active" asp-action="index" asp-controller="BookService">Book a Cleaner</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="prices" asp-controller="home">Prices</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Our Guarantee</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" asp-action="contact" asp-controller="home">Contact us</a>
                        </li>
                        <li class="nav-item hover-change">
                            <a class="nav-link rounded-link active" data-bs-toggle="modal" data-bs-target="#LoginModel">Login</a>
                        </li>
                        <li class="nav-item hover-change">
                            <a class="nav-link rounded-link active" asp-action="ServiceProviderSignUP" asp-controller="home">Become a Helper</a>
                        </li>
                    }
                    else
                    {
                        <li class="nav-item display-sm">
                            <a class="nav-link"> Welcome Sandeep</a>
                        </li>
                        @if (Usertype == 1)
                        {
                            <li class="nav-item diaplay-center">
                                <a class="nav-link rounded-link active" asp-action="index" asp-controller="BookService">Book now </a>
                            </li>
                        }


                        <li class="nav-item display-sm">
                            <a class="nav-link"> Dashboard</a>
                        </li>
                        <li class="nav-item display-sm">
                            <a class="nav-link"> Service History</a>
                        </li>
                        <li class="nav-item display-sm">
                            <a class="nav-link"> Service Schedule</a>
                        </li>
                        <li class="nav-item display-sm">
                            <a class="nav-link">  Favourite Pros </a>
                        </li>
                        <li class="nav-item display-sm">
                            <a class="nav-link"> Invoice </a>
                        </li>
                        <li class="nav-item display-sm">
                            <a class="nav-link"> Notification </a>
                        </li>

                        <li class="nav-item display-sm">
                            <a class="nav-link"> My Setting </a>
                        </li>
                        <li class="nav-item display-sm">
                            <a class="nav-link"> Logout</a>
                        </li>
                        <li class="nav-item diaplay-center">
                            <a class="nav-link " asp-action="Prices" asp-controller="home">Prices & services</a>
                        </li>
                        <li class="nav-item diaplay-center">
                            <a class="nav-link" href="#">Warranty </a>
                        </li>
                        <li class="nav-item diaplay-center">
                            <a class="nav-link" href="#">Blog</a>
                        </li>
                        <li class="nav-item diaplay-center">
                            <a class="nav-link" asp-action="Contact" asp-controller="home"> Contact</a>
                        </li>
                        <li class="nav-item display-non-sm diaplay-center">
                            <img src="~/Images/icon-notification.png" class="diaplay-center nav-border nav-link-image">
                        </li>
                        <li class="nav-item dropdown display-non-sm">
                            <a class="nav-link dropdown-toggle diaplay-center" href="#" id="navbarDropdown" role="button"
                               data-bs-toggle="dropdown" aria-expanded="false">
                                <img src="~/Images/user.png" id="navbar-user-image"
                                     class="county-flag nav-link-image-user">
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li class="">
                                    <a class="dropdown-item nav-dropdown-item" href="#">
                                        <small>Welcome,</small>
                                        @Context.Session.GetString("FirstName")
                                    </a>
                                    <hr>
                                </li>
                                @if (Usertype == 1)
                                {
                                    <li class="">
                                        <a class="dropdown-item nav-dropdown-item" asp-action="Index" asp-controller="Customer">
                                            My Dashboard
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="dropdown-item nav-dropdown-item" asp-action="Dashbord" asp-controller="Customer">
                                            My Setting
                                        </a>
                                    </li>

                                }
                                else if (Usertype == 2)
                                {
                                    <li class="">
                                        <a class="dropdown-item nav-dropdown-item" asp-action="Index" asp-controller="ServiceProvider">
                                            My Dashboard
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="dropdown-item nav-dropdown-item" asp-action="MySetting" asp-controller="ServiceProvider">
                                            My Setting
                                        </a>
                                    </li>
                                }
                                <li class="">
                                    <a class="dropdown-item nav-dropdown-item" asp-action="Logout" asp-controller="Home">
                                        Logout
                                    </a>
                                </li>
                            </ul>
                        </li>
                    }

                </ul>
            </div>
        </div>
    </nav>
    @if (userID == null)
    {
        @*<partial name="_LoginPartialView" model="Model" />*@
    }

    <div class="row justify-content-center gray-bachgroud" style="margin-top:100px; padding-top:2rem;padding-bottom:2rem;">
        <h1 class="text-center"> Welcome, @HttpContextAccessor.HttpContext.Session.GetString("FirstName") </h1>
    </div>
    <div class="row justify-content-center">
        <partial name="_partialLeftSideNav" />
        <input type="hidden" value="@HttpContextAccessor.HttpContext.Session.GetString("userID")" id="userId" />
        <div class="col-md-9">
            <div class="row p-3">
                <div class="col-md-6">
                    <h3>  Service History </h3>
                </div>
                <div class="row p-3">
                    <div class="col-md-12 table-responsive">
                        <table id="tblServiceRequestHistory" class="table">
                            <thead>
                                <tr>
                                    <td>Service Id </td>
                                    <td>Service Date </td>
                                    <td>Service Provider </td>
                                    <td>Payment</td>
                                    <td>Status</td>
                                    <td> Rate SP</td>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td onclick="OpenModel(@item.ServiceId)"> @item.ServiceId </td>
                                        <td class="flex" onclick="OpenModel(@item.ServiceId)">
                                            <div><img src="~/Images/calendar2.png" asp-append-version="true"><b> @item.StartDate</b> </div>
                                            8.:00 - 12:00
                                        </td>
                                        <td onclick="OpenModel(@item.ServiceId)">
                                            @if (item.ServiceProviderName != null)
                                            {
                                                <div class="d-flex">
                                                    <div class="service-history-icon d-flex"><img src="~/Images/cap.png"></div>
                                                    <div>
                                                        <span class="d-block"> @item.ServiceProviderName </span>
                                                        @{
                                                            int i = (int)item.Rating;
                                                        }
                                                        @for (int j = 0; j < i; j++)
                                                        {
                                                            <img src="~/Images/yellow-small-star.png" class="service-history-star-icon">
                                                        }
                                                        @for (int j = 0; j < 5 - i; j++)
                                                        {
                                                            <img src="~/Images/grey-small-star.png" class="service-history-star-icon">
                                                        }
                                                        @i
                                                    </div>

                                                </div>
                                            }

                                        </td>
                                        <td class="active-font" onclick="OpenModel(@item.ServiceId)">
                                            <div> <b> @item.Payment  € </b> </div>
                                        </td>
                                        <td>
                                            @if (item.Status == 2)
                                            {
                                                <span class="cancel">Cancel</span>
                                            }
                                            @if (item.Status == 1)
                                            {
                                                <span class="completed">Completed</span>
                                            }
                                        </td>
                                        <td>
                                            @if (item.Rate == false)
                                            {
                                                <button class="btn marun font-white rounded-pill" disabled>Rate SP</button>
                                            }
                                            else
                                            {
                                                <button type="button" class="btn marun font-white rounded-pill" data-bs-toggle="modal" data-bs-target="#RateSPModel" data-bs-dismiss="modal" onclick="RateSp(@item.ServiceId)">Rate SP</button>
                                            }

                                        </td>

                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal  Service Details -->
    <div class="modal fade" id="ServiceDeatils" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Service Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-9" id="ModelMainDiv">
                            <div>
                                <span id="ModelServiceDate" class="font-bold h5"></span> 8:00 - 13:00<br />
                                <span class="font-bold"> Duration </span><span id="ModelDuration"> </span> Hrs
                            </div>
                            <hr />
                            <div>
                                <span class="font-bold"> Service Id: </span><span id="ModelServiceRequestId"> </span>.<br />
                                <span class="font-bold"> Extras </span> <span id="ModelExtra"></span><br />
                                <span class="font-bold"> Net Amount: </span> <span id="ModelTotalCost" class="font-blue font-bold"></span> € <br />
                            </div>
                            <hr />
                            <div>
                                <span class="font-bold"> Service Address </span><span id="ModelServiceAddress"> </span>.<br />
                                <span class="font-bold"> Phone Number </span><span id="ModelMobileNumber"> </span><br />
                                <span class="font-bold"> Email </span><span id="ModelEmail"> </span><br />
                            </div>
                            <hr />
                            <div>
                                <span class="font-bold"> Comments </span> <br /> <span id="ModelComments"> </span>
                            </div>
                            <hr />
                            <span id="ModelHasPat">  @*I <span id="ModelHasPat">  don't </span>  have Pets at Home*@</span>

                        </div>
                        <div class="col-md-3 display-none" id="ModelServiceProviderDetails">
                            <h6> Service Provider Details</h6>
                            <div class="d-flex">
                                <div class="service-history-icon d-flex"><img src="~/Images/cap.png"></div>

                                <div>
                                    <span id="ModelServiceRating"></span>
                                </div>
                                <div id="ModelServiceProviderName"> </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- rate SP Model -->
    <div class="modal fade" id="RateSPModel" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Rate SP</h2>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="ratingServiceRequestId" />
                    <div class="alert alert-success alert-dismissible fade show display-none" role="alert">
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                    <div class="row">
                        <div class="col-md-12" id="ModelServiceProviderDetails">
                            <h6> Service Provider Details</h6>
                            <div class="d-flex">
                                <div class="service-history-icon d-flex"><img src="/Images/cap.png"></div>
                                <div>
                                    <span class="d-block" id="RatingModelServiceProviderName">  </span>
                                    <span id="ModelServiceRatingDetails"></span>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="row mt-2">
                        <div class="col-md-12">
                            <h5> Rate your service provider</h5>
                            <hr />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <label for="onTimeArrival" class="font-bold">On time arrival </label>
                            <input id="onTimeArrival" class="rating rating-loading " data-show-clear="false" value="4">
                            <label for="friendly" class="font-bold">Friendly</label>
                            <input id="friendly" class="rating rating-loading " data-show-clear="false">
                            <label for="qualityOfService" class="font-bold">Quality of service</label>
                            <input id="qualityOfService" class="rating rating-loading " data-show-clear="false">

                            <span class="text-danger display-none" id="errRating">please give rating</span>
                        </div>
                    </div>
                    <div class="row mb-2">
                        <div class="col-md-12">
                            <span class="font-bold"> Feedback on service provider</span>
                            <textarea rows="3" class="form-control" id="feedback"></textarea>
                        </div>
                    </div>

                    <button class="btn marun rounded-pill font-white" onclick="SubmitDataOfRateSP()">Submit </button>
                </div>

            </div>
        </div>
    </div>




    <script src="~/lib/jquery/jquery.js"></script>
    <script src="~/lib/jquery-validate/jquery.validate.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.js"></script>
    <script src="~/lib/jquery-ajax-unobtrusive/jquery.unobtrusive-ajax.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <!-- Main Js File-->
    <script src="~/js/main.js"></script>
    <!-- JS Bootstrap -->

    <script src="~/lib/twitter-bootstrap/js/bootstrap.min.js"></script>
    <!-- fontawesome -->
    <script src="https://kit.fontawesome.com/ae6d6e0254.js" crossorigin="anonymous"></script>
    <script src="https://lesscss.googlecode.com/files/less-1.0.30.min.js"></script>
    <link href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/css/star-rating.min.css" media="all" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.css" media="all" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>
    <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>

    <script>
         /*   Open Service Details Model on Click of Table Row*/
            function OpenModel(para) {
            $("#ServiceDeatils").modal('show');
            $("#ModelServiceRequestId").text(para);
            $("#ModelbtnReschedule").val(para);
            $("#ModelbtnCancel").val(para);
            $.ajax({
                  type: "POST",
                  url: "@Url.Action("GetServiceRequestData", "Customer")",
                data: { "ServiceRequestId": para },
                 success: function (responce) {
                     var obj = JSON.parse(responce);
                     console.log(obj);
                     $("#ModelDuration").text(obj.TotalHour);
                     $("#ModelServiceDate").text(obj.ServiceDate);
                     $("#ModelExtra").text(obj.Extra);
                     $("#ModelTotalCost").text(obj.TotalCost);
                     $("#ModelServiceAddress").text(obj.Address);
                     $("#ModelMobileNumber").text(obj.MobileNumber);
                     $("#ModelEmail").text(obj.Email);
                     $("#ModelComments").text(obj.Comments);
                     if (obj.ServiceProviderId != null) {
                         $("#ModelServiceProviderName").text(obj.ServiceProviderName);
                         $("#ModelServiceProviderDetails").show();
                         $("#ModelServiceProviderDetails").addClass("col-md-3");
                         $("#ModelMainDiv").addClass("col-md-9");
                         $("#ModelMainDiv").removeClass("col-md-12");
                     }
                     else {
                         $("#ModelServiceProviderDetails").hide();
                         $("#ModelServiceProviderDetails").removeClass("col-md-3");
                         $("#ModelMainDiv").removeClass("col-md-9");
                         $("#ModelMainDiv").addClass("col-md-12");
                     }
                     if (obj.Haspet) {
                         /*$("#ModelHasPatImage").attr("src", "~/Images/included.png");*/
                         $("#ModelHasPat").text("✔  I have Pets at Home");
                     } else {
                         /*$("#ModelHasPatImage").attr("src", "~/Images/not-included.png");*/
                         $("#ModelHasPat").text(" ✘ I don't have Pets at Home");
                     }
                     $("#ModelServiceRating").empty();
                    for (var i = 0; i < 5; i++) {
                        if (obj.Rating > i) {
                             $("#ModelServiceRating").append('<img src="/Images/yellow-small-star.png" class="service-history-star-icon">');
                         }
                         else {
                             $("#ModelServiceRating").append('<img src="/Images/grey-small-star.png" class="service-history-star-icon">');
                         }
                     }

                     $("#ModelServiceRating").append(obj.Rating);
                 },
                 failure: function (response) {
                        alert("failure");
                 },
                 error: function (response) {
                        alert("Something went Worng");
                 }
              });
        }
           /* Rate Sp model open*/
        function RateSp(para) {
            alert(para);
                $("#ratingServiceRequestId").val(para);
                $("#RateSPModel").modal('show');
                $("#onTimeArrival").rating("update", "0");
                $("#friendly").rating("update", "0");
                $("#qualityOfService").rating("update", "0");
                $("#feedback").val("");
                $.ajax({
                  type: "POST",
                  url: "@Url.Action("GetServiceRequestData","Customer")",
                    data: { "ServiceRequestId": para },
                 success: function (responce) {
                     var obj = JSON.parse(responce);
                     console.log(obj);
                     $("#RatingModelServiceProviderName").text(obj.ServiceProviderName);
                     $("#ModelServiceRatingDetails").empty();
                     for (var i = 0; i < 5; i++) {
                         if (obj.Rating > i) {
                             $("#ModelServiceRatingDetails").append('<img src="/Images/yellow-small-star.png" class="service-history-star-icon">');
                         }
                         else {
                             $("#ModelServiceRatingDetails").append('<img src="/Images/grey-small-star.png" class="service-history-star-icon">');
                         }
                     }
                     $("#ModelServiceRatingDetails").append(obj.Rating);
                 },
                 failure: function (response) {
                        alert("failure");
                 },
                 error: function (response) {
                        alert("Something went Worng");
                 }
              });
            }
            /*Submit button of RateSP Model*/
            function SubmitDataOfRateSP() {
                var onTime = $("#onTimeArrival").val();
                var friendly = $("#friendly").val();
                var qualityOfservice = $("#qualityOfService").val();
                if (onTime <= 0 || friendly <= 0 || qualityOfservice <= 0) {
                    $("#errRating").show();
                    return;
                }
                else {
                    $("#errRating").hide();
                    $.ajax({
                          type: "POST",
                        url: "@Url.Action("AddRating","Customer")",
                        data: { "ServiceReqestId": $("#ratingServiceRequestId").val(), "onTime": onTime, "friendly": friendly, "qualityOfService": qualityOfservice, "feedBack": $("#feedback").val() },
                        success: function (responce) {
                            location.reload();
                         },
                         failure: function (response) {
                                alert("failure");
                         },
                         error: function (response) {
                                alert("Something went Worng");
                         }
                     });
                }
            }
            $(".rating").rating({
                min: 0,
                max: 5,
                step: 0.5,
                size: "xs",
                stars: "5",
                showClear: false,
                readonly: false,
                starCaptions: function (val) {
                    return val;
                },

            });
            $(document).ready(function () {
                $('#tblServiceRequestHistory').dataTable({
                    "bFilter": false,
                    "bInfo": false,
                    'aoColumnDefs': [{
                        'bSortable': false,
                        'aTargets': [-1] /* 1st one, start by the right */
                    }]
                });
            })
    </script>





    <!-- Jquery -->

</body>

</html>